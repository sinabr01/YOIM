<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="~{layouts/default}">

<head>
    <script th:inline="javascript">
        $(document).ready(function() {

            //공통 날짜포맷 해주기
            document.querySelectorAll('.auto-format').forEach(el => {
                el.textContent = formatDateStr(el.dataset.date);
            });

            $('#companyTemplateCode li').on('click', function() {
                // 모든 항목 선택 해제
                $('#companyTemplateCode li').removeClass('is-selected');
                // 현재 클릭된 항목만 선택
                $(this).addClass('is-selected');

                // hidden input과 label 갱신
                $('#searchType').val($(this).data('value'));
                $('#selectedLabel').text($(this).text());
            });
            //  Enter 누르면 form 자동 submit
            $('#keyword').on('keypress', function(e) {
                if (e.which === 13) { // Enter key
                    e.preventDefault(); // 엔터 기본 동작 방지 (필요시)
                    $('#searchFrm').submit();
                }
            });
        })



        // 자동 실행
    </script>
</head>
<body>

<!-- wrap -->
<div id="container" layout:fragment="content">

    <main id="contents">
    <form name="searchFrm" id="searchFrm" method="get">
        <input type="hidden" name="currentPage" id="currentPage" />
        <div class="sub">
            <div class="sub-tit-area">
                <div class="sub-tit-wrap">
                    <span class="tit">모임 템플릿</span>
                </div>

                <!-- 검색박스 -->
                <div class="search-box">
                    <div class="search-box-inner">
                        <!-- 셀렉트박스 -->
                        <div class="custom-select-box" style="width: 120px;">
                            <button type="button" class="select-btn">
                                <span></span>
                            </button>
                            <ul id="companyTemplateCode" class="select-options">
                                <li th:each="code, idx : ${companyTemplateCode}"
                                    th:id="|opt_${code.codeId}|"
                                    th:text="${code.codeNm}"
                                    th:attr="data-value=${code.codeId}"
                                    th:classappend="${code.codeId == searchType} ? ' is-selected' : ''"
                                    class="select-option">
                                </li>
                            </ul>
                            <input type="hidden" name="searchType" id="searchType"/>
                        </div>
                        <!--// 셀렉트박스 -->

                        <div class="search-input">
                            <input type="text" name="keyword" id="keyword" th:value="${keyword}">
                        </div>

                        <button type="submit" class="btn md fill-gray">검색</button>
                        <button type="button" class="btn md fill-gray" th:onclick="|location.href='@{/admin/notice/nv_noticeForm}'|">추가</button>
                    </div>
                    <!--// 검색박스 -->
                </div>
            </div>


            <div class="board mt50-xl">
                <div class="table-wrap v1">
                    <table>
                        <colgroup>
                            <col style="width: 160px">
                            <col style="width: auto">
                            <col style="width: 260px">
                        </colgroup>

                        <thead>
                        <tr>
                            <th>번호</th>
                            <th>제목</th>
                            <th>등록일</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="list,idx : ${plist}">
                            <td>
                                <span class="tb-basic" th:text="${maxnumber - ((currentPage - 1) * 10) - idx.index}"></span>
                            </td>
                            <td th:onclick="|location.href='@{/admin/notice/nv_noticeView(noticeId=${list.noticeId})}'|"><span class="tb-tit" th:text="${list.title}"></span></td>
                            <td><span class="tb-date"><!-- ${list.registDt} -->
                                <i class="icon calendar_gray"></i>
                                <span th:attr="data-date=${list.registDt}" class="auto-format"></span>
                              </span></td>
                        </tr>

                        <!-- 데이터 없을때 -->
                        <tr th:if="${#lists.isEmpty(plist)}" class="no-data">
                            <td colspan="3">조회된 데이터가 없어요.</td>
                        </tr>
                        <!--// 데이터 없을때 -->
                        </tbody>
                    </table>
                </div>

                <!-- 페이지네이션 -->
                <div class="pagination" th:utext="${page}">
                </div>
                <!--// 페이지네이션 -->

            </div>

        </div>
    </form>

    </main>




</div>
<!-- //wrap -->



</body>
</html>
