<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="~{layouts/default}">

<head>
    <script th:inline="javascript">
        $(document).ready(function() {
            document.querySelectorAll('.auto-format').forEach(el => {
                el.textContent = formatDateStr(el.dataset.date);
            });
            $('#noticeCode li').on('click', function() {
                // ëª¨ë“  í•­ëª© ì„ íƒ í•´ì œ
                $('#noticeCode li').removeClass('is-selected');
                // í˜„ì¬ í´ë¦­ëœ í•­ëª©ë§Œ ì„ íƒ
                $(this).addClass('is-selected');

                // hidden inputê³¼ label ê°±ì‹ 
                $('#searchType').val($(this).data('value'));
                $('#selectedLabel').text($(this).text());
            });
            // ğŸ”¹ Enter ëˆ„ë¥´ë©´ form ìë™ submit
            $('#keyword').on('keypress', function(e) {
                if (e.which === 13) { // Enter key
                    e.preventDefault(); // ì—”í„° ê¸°ë³¸ ë™ì‘ ë°©ì§€ (í•„ìš”ì‹œ)
                    $('#searchFrm').submit();
                }
            });
        })

        function formatDateStr(str) {
            if (!str) return '';
            const d = new Date(str.replace(' ', 'T'));
            if (isNaN(d)) return str;
            return d.toLocaleString('ko-KR', {
                year: '2-digit', month: 'numeric', day: 'numeric',
                weekday: 'short', hour: 'numeric', minute: '2-digit', hour12: true
            }).replace(/\./g, '.').replace(/\s+/g, ' ').trim();
        }

        // ìë™ ì‹¤í–‰
    </script>
</head>
<body>

<!-- wrap -->
<div id="container" layout:fragment="content">

    <main id="contents">
    <form name="searchFrm" id="searchFrm" method="get">
        <input type="hidden" name="currentPage" id="currentPage" />
        <div class="sub">
            <div class="sub-tit-area">
                <div class="sub-tit-wrap">
                    <span class="tit">ê²Œì‹œíŒ</span>
                </div>

                <!-- ê²€ìƒ‰ë°•ìŠ¤ -->
                <div class="search-box">
                    <div class="search-box-inner">
                        <!-- ì…€ë ‰íŠ¸ë°•ìŠ¤ -->
                        <div class="custom-select-box" style="width: 120px;">
                            <button type="button" class="select-btn">
                                <span></span>
                            </button>
                            <ul id="noticeCode" class="select-options">
                                <li th:each="code, idx : ${noticeCode}"
                                    th:id="|opt_${code.codeId}|"
                                    th:text="${code.codeNm}"
                                    th:attr="data-value=${code.codeId}"
                                    th:classappend="${code.codeId == searchType} ? ' is-selected' : ''"
                                    class="select-option">
                                </li>
                            </ul>
                            <input type="hidden" name="searchType" id="searchType"/>
                        </div>
                        <!--// ì…€ë ‰íŠ¸ë°•ìŠ¤ -->

                        <div class="search-input">
                            <input type="text" name="keyword" id="keyword" th:value="${keyword}">
                        </div>

                        <button type="submit" class="btn md fill-gray">ê²€ìƒ‰</button>
                        <button type="button" class="btn md fill-gray" th:onclick="|location.href='@{/admin/notice/nv_noticeForm}'|">ê¸€ì“°ê¸°</button>
                    </div>
                    <!--// ê²€ìƒ‰ë°•ìŠ¤ -->
                </div>
            </div>


            <div class="board mt50-xl">
                <div class="table-wrap v1">
                    <table>
                        <colgroup>
                            <col style="width: 160px">
                            <col style="width: auto">
                            <col style="width: 260px">
                        </colgroup>

                        <thead>
                        <tr>
                            <th>ë²ˆí˜¸</th>
                            <th>ì œëª©</th>
                            <th>ë“±ë¡ì¼</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- ê³µì§€ -->
                        <tr th:each="list,idx : ${plist}">
                            <td>
                                <span class="txt-yellow txt-bold" th:if="${list.pinnedYn == 'Y'}">ê³µì§€</span>
                                <span class="tb-basic" th:if="${list.pinnedYn == 'N'}"
                                      th:text="${maxnumber - ((currentPage - 1) * 10) - idx.index}"></span>
                            </td>
                            <td th:onclick="|location.href='@{/admin/notice/nv_noticeView(noticeId=${list.noticeId})}'|"><span class="tb-tit" th:text="${list.title}"></span></td>
                            <td><span class="tb-date"><!-- ${list.registDt} -->
                                <i class="icon calendar_gray"></i>
                                <span th:attr="data-date=${list.registDt}" class="auto-format"></span>
                              </span></td>
                        </tr>

                        <!-- ë°ì´í„° ì—†ì„ë•Œ -->
                        <tr th:if="${#lists.isEmpty(plist)}" class="no-data">
                            <td colspan="3">ì¡°íšŒëœ ë°ì´í„°ê°€ ì—†ì–´ìš”.</td>
                        </tr>
                        <!--// ë°ì´í„° ì—†ì„ë•Œ -->
                        </tbody>
                    </table>
                </div>

                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <div class="pagination" th:utext="${page}">
                </div>
                <!--// í˜ì´ì§€ë„¤ì´ì…˜ -->

            </div>

        </div>
    </form>

    </main>




</div>
<!-- //wrap -->



</body>
</html>
