<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      layout:decorate="~{layouts/default}">

<head>
    <script th:inline="javascript">
        $(document).ready(function() {
            document.querySelectorAll('.auto-format').forEach(el => {
                el.textContent = formatDateStr(el.dataset.date);
            });
        })

        function formatDateStr(str) {
            if (!str) return '';
            const d = new Date(str.replace(' ', 'T'));
            if (isNaN(d)) return str;
            return d.toLocaleString('ko-KR', {
                year: '2-digit', month: 'numeric', day: 'numeric',
                weekday: 'short', hour: 'numeric', minute: '2-digit', hour12: true
            }).replace(/\./g, '.').replace(/\s+/g, ' ').trim();
        }

        // 자동 실행
    </script>
</head>
<body>

<!-- wrap -->
<div id="container" layout:fragment="content">

    <main id="contents">
    <form name="searchFrm" id="searchFrm" method="post">
        <input type="hidden" name="currentPage" id="currentPage" />
        <div class="sub">
            <div class="sub-tit-area">
                <div class="sub-tit-wrap">
                    <span class="tit">게시판</span>
                </div>

                <!-- 검색박스 -->
                <div class="search-box">
                    <div class="search-box-inner">
                        <!-- 셀렉트박스 -->
                        <div class="custom-select-box" style="width: 120px;">
                            <button type="button" class="select-btn">
                                <span></span>
                            </button>
                            <ul class="select-options">
                                <li class="select-option is-selected" data-value="전체">전체</li>
                                <li class="select-option" data-value="제목">제목</li>
                                <li class="select-option" data-value="내용">내용</li>
                                <li class="select-option" data-value="호스트">호스트</li>
                            </ul>
                        </div>
                        <!--// 셀렉트박스 -->

                        <div class="search-input">
                            <input type="text" name="" id="">
                        </div>

                        <button type="button" class="btn md fill-gray">검색</button>
                        <button type="button" class="btn md fill-gray" th:onclick="|location.href='@{/admin/notice/nv_noticeForm}'|">글쓰기</button>
                    </div>
                    <!--// 검색박스 -->
                </div>
            </div>


            <div class="board mt50-xl">
                <div class="table-wrap v1">
                    <table>
                        <colgroup>
                            <col style="width: 160px">
                            <col style="width: auto">
                            <col style="width: 260px">
                        </colgroup>

                        <thead>
                        <tr>
                            <th>번호</th>
                            <th>제목</th>
                            <th>등록일</th>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- 공지 -->
                        <tr th:each="list,idx : ${plist}">
                            <td>
                                <span class="txt-yellow txt-bold" th:if="${list.pinnedYn == 'Y'}">공지</span>
                                <span class="tb-basic" th:if="${list.pinnedYn == 'N'}"
                                      th:text="${maxnumber - ((currentPage - 1) * 10) - idx.index}"></span>
                            </td>
                            <td onclick="location.href='/admin/noticeList'"><span class="tb-tit" th:text="${list.title}"></span></td>
                            <td><span class="tb-date"><!-- ${list.registDt} -->
                                <i class="icon calendar_gray"></i>
                                <span th:attr="data-date=${list.registDt}" class="auto-format"></span>
                              </span></td>
                        </tr>

                        <!-- 데이터 없을때 -->
                        <tr th:if="${#lists.isEmpty(plist)}" class="no-data">
                            <td colspan="3">조회된 데이터가 없어요.</td>
                        </tr>
                        <!--// 데이터 없을때 -->
                        </tbody>
                    </table>
                </div>

                <!-- 페이지네이션 -->
                <div class="pagination" th:utext="${page}">
                </div>
                <!--// 페이지네이션 -->

            </div>

        </div>
    </form>

    </main>




</div>
<!-- //wrap -->



</body>
</html>
